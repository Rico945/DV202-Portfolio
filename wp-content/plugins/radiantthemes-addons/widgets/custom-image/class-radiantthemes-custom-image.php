<?php/** * Custom Image * * @package Radiantthemes */namespace RadiantthemesAddons\Widgets;use Elementor\Controls_Manager;use Elementor\Widget_Base;if ( ! defined( 'ABSPATH' ) ) {	exit; // Exit if accessed directly.}/** * Elementor Custom Image Widget. * * Elementor widget that displays an image into the page. * * @since 1.0.0 */class Radiantthemes_Custom_Image extends Widget_Base {	/**	 * Retrieve the widget name.	 *	 * @since 1.1.0	 *	 * @access public	 *	 * @return string Widget name.	 */	public function get_name() {		return 'radiant-custom-image';	}	/**	 * Retrieve the widget title.	 *	 * @since 1.1.0	 *	 * @access public	 *	 * @return string Widget title.	 */	public function get_title() {		return esc_html__( 'Retina Image', 'radiantthemes-addons' );	}	/**	 * Retrieve the widget icon.	 *	 * @since 1.1.0	 *	 * @access public	 *	 * @return string Widget icon.	 */	public function get_icon() {		return 'eicon-image';	}	/**	 * Requires css files.	 *	 * @return array	 */	public function get_style_depends() {		return array(			'radiantthemes-addons-custom',		);	}	/**	 * Retrieve the list of categories the widget belongs to.	 *	 * Used to determine where to display the widget in the editor.	 *	 * Note that currently Elementor supports only one category.	 * When multiple categories passed, Elementor uses the first one.	 *	 * @since 1.1.0	 *	 * @access public	 *	 * @return array Widget categories.	 */	public function get_categories() {		return array( 'radiant-widgets-category' );	}	/**	 * Register the widget controls.	 *	 * Adds different input fields to allow the user to change and customize the widget settings.	 *	 * @since 1.1.0	 *	 * @access protected	 */	protected function register_controls() {		$this->start_controls_section(			'section_content',			array(				'label' => esc_html__( 'Custom Image', 'radiantthemes-addons' ),			)		);		$this->add_control(			'default_image',			array(				'label'       => esc_html__( 'Choose Image', 'radiantthemes-addons' ),				'label_block' => true,				'type'        => Controls_Manager::MEDIA,			)		);		$this->add_control(			'retina_image',			array(				'label'       => esc_html__( 'Choose Retina Image', 'radiantthemes-addons' ),				'label_block' => true,				'type'        => Controls_Manager::MEDIA,			)		);		$this->add_control(			'custom_image_link',			array(				'label'         => esc_html__( 'Image Link', 'radiantthemes-addons' ),				'type'          => Controls_Manager::URL,				'placeholder'   => esc_html__( 'https://your-link.com', 'radiantthemes-addons' ),				'show_external' => true,				'default'       => array(					'url'         => '',					'is_external' => true,					'nofollow'    => true,				),			)		);		$this->end_controls_section();	}	/**	 * Render the widget output on the frontend.	 *	 * Written in PHP and used to generate the final HTML.	 *	 * @since 1.1.0	 *	 * @access protected	 */	protected function render() {		$settings = $this->get_settings_for_display();		$target   = $settings['custom_image_link']['is_external'] ? ' target="_blank"' : '';		$nofollow = $settings['custom_image_link']['nofollow'] ? ' rel="nofollow"' : '';		if ( $settings['default_image']['url'] != '' ) {			if ( $settings['custom_image_link']['url'] != '' ) {				echo '<a href="' . esc_url( $settings['custom_image_link']['url'] ) . '"' . $target . $nofollow . '>';				if ( $settings['retina_image']['url'] != '' ) {					echo '<img alt="custom-image" src="' . esc_url( $settings['default_image']['url'] ) . '" srcset="' . esc_url( $settings['default_image']['url'] ) . ' 1x, ' . esc_url( $settings['retina_image']['url'] ) . ' 2x">';				} else {					echo '<img alt="custom-image" src="' . esc_url( $settings['default_image']['url'] ) . '">';				}				echo '</a>';			} else {				if ( $settings['retina_image']['url'] != '' ) {					echo '<img alt="custom-image" src="' . esc_url( $settings['default_image']['url'] ) . '" srcset="' . esc_url( $settings['default_image']['url'] ) . ' 1x, ' . esc_url( $settings['retina_image']['url'] ) . ' 2x">';				} else {					echo '<img alt="custom-image" src="' . esc_url( $settings['default_image']['url'] ) . '">';				}			}		}	}}